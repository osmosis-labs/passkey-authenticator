
Uplading and Instantiating the contract


// compile the passkey_authenticator
docker run --rm -v "$(pwd)":/code \     
  --mount type=volume,source="$(basename "$(pwd)")_cache",target=/target \
  --mount type=volume,source=registry_cache,target=/usr/local/cargo/registry \
  cosmwasm/optimizer:0.15.0


 // get keys
 make localnet --help 
 osmosisd keys list --keyring-backend test 
 


 // upload the binary
 cd artifacts
 osmosisd tx wasm store passkey_authenticator.wasm --from val --keyring-backend test --chain-id smartaccount --node http://164.92.247.225:26657 --fees 40000uosmo --gas 10000000

 // query the transcation to get the code-id (827)
 osmosisd query tx --node http://164.92.247.225:26657 D5B3E5AC07C623C1D7F63A8B0F702157939AFB734AF34FCD6C13DD31FDD2529C
 // query the code-id to verify the wasm blob
 osmosisd query wasm code-info 827 --node http://164.92.247.225:26657
 // instantiate the contract
 osmosisd tx wasm instantiate 827 "{}" --label "passkey" --no-admin --gas-prices 0.25uosmo --gas auto --gas-adjustment 1.5 --from val --keyring-backend test --chain-id smartaccount --node http://164.92.247.225:26657 
// query the transcation to get the contract address
osmosisd query tx --node http://164.92.247.225:26657 43E593026BA3946203BDF3A6F4914272E02E9ACBD54F600FF842BC492276CDD2
Example:

- attributes:
  - index: true
    key: _contract_address
    value: osmo177xfj8lvtywmjxw0ep42cuyuz9fuym7nx3x6ldj5s37yjtn782hq5h8eed
  - index: true
    key: action
    value: instantiate
  - index: true
    key: msg_index
    value: "0"
  type: wasm


we are going to use this contract from here on out:
--> osmo177xfj8lvtywmjxw0ep42cuyuz9fuym7nx3x6ldj5s37yjtn782hq5h8eed


osmosisd query wasm contract-state smart osmo177xfj8lvtywmjxw0ep42cuyuz9fuym7nx3x6ldj5s37yjtn782hq5h8eed '{"verify_secp256_r1_signature": { "message": "ZHNmbGtqYWpkc2ZhZHNm", "signature": "2Cj9wMWx3DUUii2IKQ4mDcsaZ6O6Y4F5aa973kFK1lZtlMjTVfxG1aSrFA4IfEECRBPV/4dG5VWwF+BXz/Mx3g==", "public_key": "A2MR6q+pOpLtdxh0tHHe2JrEY2KOcvRogtLxHDHzJvOh" }}' --node http://164.92.247.225:26657

// Create curl this node: http://164.92.247.225:9090 using grpc with that json {"verify_secp256_r1_signature": { "message": "ZHNmbGtqYWpkc2ZhZHNm", "signature": "2Cj9wMWx3DUUii2IKQ4mDcsaZ6O6Y4F5aa973kFK1lZtlMjTVfxG1aSrFA4IfEECRBPV/4dG5VWwF+BXz/Mx3g==", "public_key": "A2MR6q+pOpLtdxh0tHHe2JrEY2KOcvRogtLxHDHzJvOh" }}



generate the passkye and query the verify_secp256_r1_signature with that a payload.



curl http://164.92.247.225:1317/cosmswasm/wasm/v1/contract/osmo177xfj8lvtywmjxw0ep42cuyuz9fuym7nx3x6ldj5s37yjtn782hq5h8eed/smart/eyJ2ZXJpZnlfc2VjcDI1Nl9yMV9zaWduYXR1cmUiOiB7ICJtZXNzYWdlIjogIlpITm1iR3RxWVdwa2MyWmhaSE5tIiwgInNpZ25hdHVyZSI6ICIyQ2o5d01XeDNEVVVpaTJJS1E0bURjc2FaNk82WTRGNWFhOTcza0ZLMWxadGxNalRWZnhHMWFTckZBNElmRUVDUkJQVi80ZEc1Vld3RitCWHovTXgzZz09IiwgInB1YmxpY19rZXkiOiAiQTJNUjZxK3BPcEx0ZHhoMHRISGUySnJFWTJLT2N2Um9ndEx4SERIekp2T2giIH19

curl http://164.92.247.225:1317/cosmswasm/wasm/v1/code/827
curl http://164.92.247.225:26657/cosmswasm/wasm/v1/code/827

curl -X POST http://164.92.247.225:9090 \
     -H "Content-Type: application/json" \
     -d '{"verify_secp256_r1_signature": { "message": "ZHNmbGtqYWpkc2ZhZHNm", "signature": "2Cj9wMWx3DUUii2IKQ4mDcsaZ6O6Y4F5aa973kFK1lZtlMjTVfxG1aSrFA4IfEECRBPV/4dG5VWwF+BXz/Mx3g==", "public_key": "A2MR6q+pOpLtdxh0tHHe2JrEY2KOcvRogtLxHDHzJvOh" }}'